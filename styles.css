/* ═══════════════════════════════════════════════════════
   PAYRAUD MUSIC — DARK CINEMATIC TRAP AESTHETIC
   ═══════════════════════════════════════════════════════ */

:root {
  --bg:        #080808;
  --bg2:       #0f0f0f;
  --bg3:       #161616;
  --bg4:       #1e1e1e;
  --line:      rgba(255,255,255,0.06);
  --text:      #f0f0f0;
  --muted:     #666;
  --muted2:    #444;
  --white:     #ffffff;
  --accent:    #ffffff;
  --track-accent: #fff;
  --player-h:  88px;
  --sidebar-w: 220px;
  --ease:      cubic-bezier(0.4,0,0.2,1);
  --ease-out:  cubic-bezier(0,0,0.2,1);
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { font-size:15px; }
body {
  font-family: 'Syne', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}

/* Ambient glow behind player */
body::after {
  content: '';
  position: fixed;
  bottom: 0; left: 50%; transform: translateX(-50%);
  width: 600px; height: 300px;
  background: radial-gradient(ellipse at center bottom, rgba(var(--glow-rgb,255,255,255),0.07) 0%, transparent 70%);
  pointer-events: none; z-index: 0;
  transition: background 2s ease;
}

/* ── SCROLLBAR ─── */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--bg4); border-radius: 2px; }
::-webkit-scrollbar-thumb:hover { background: var(--muted2); }

/* ═══════════════════════════════════════════
   LAYOUT
   ═══════════════════════════════════════════ */
.app {
  display: grid;
  grid-template-columns: var(--sidebar-w) 1fr;
  grid-template-rows: 1fr var(--player-h);
  height: 100vh;
}

/* ── SIDEBAR ── */
.sidebar {
  grid-row: 1 / 2;
  background: var(--bg2);
  border-right: 1px solid var(--line);
  display: flex; flex-direction: column;
  padding: 1.5rem 0;
  position: relative; z-index: 10;
}

.brand {
  padding: 0 1.5rem 1.75rem;
  border-bottom: 1px solid var(--line);
}
.brand-name {
  font-size: 1.15rem; font-weight: 800;
  letter-spacing: -0.5px;
  color: var(--white);
}
.brand-name span { color: var(--muted); font-weight: 400; }

.nav {
  padding: 1.25rem 0.75rem;
  flex: 1;
  display: flex; flex-direction: column; gap: 2px;
}
.nav-item {
  display: flex; align-items: center; gap: 0.75rem;
  padding: 0.6rem 0.75rem;
  border-radius: 8px;
  font-size: 0.875rem; font-weight: 600;
  color: var(--muted); background: none; border: none;
  cursor: pointer; transition: all 0.15s; width: 100%;
  text-align: left; position: relative;
}
.nav-item svg { width: 16px; height: 16px; flex-shrink: 0; }
.nav-item:hover { color: var(--text); background: var(--bg3); }
.nav-item.active { color: var(--white); background: var(--bg3); }
.nav-item.active::before {
  content: ''; position: absolute; left: 0; top: 50%; transform: translateY(-50%);
  width: 3px; height: 18px; background: var(--white); border-radius: 0 2px 2px 0;
}
.nav-badge {
  margin-left: auto; background: var(--bg4);
  color: var(--muted); font-size: 0.7rem;
  padding: 1px 6px; border-radius: 20px;
  font-family: 'DM Mono', monospace;
}
.nav-item.active .nav-badge { background: rgba(255,255,255,0.15); color: var(--white); }

.nav-section { padding: 1.25rem 1.5rem 0.4rem; font-size: 0.65rem; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; color: var(--muted2); }

.genre-list { padding: 0 0.75rem; display: flex; flex-direction: column; gap: 2px; }
.genre-pill {
  padding: 0.45rem 0.75rem; border-radius: 6px;
  font-size: 0.8rem; font-weight: 600; color: var(--muted);
  background: none; border: none; cursor: pointer;
  text-align: left; transition: all 0.15s;
}
.genre-pill:hover { color: var(--text); background: var(--bg3); }
.genre-pill.active { color: var(--white); }

/* ── MAIN AREA ── */
.main {
  grid-column: 2; grid-row: 1 / 2;
  display: flex; flex-direction: column;
  overflow: hidden;
}

/* TOPBAR */
.topbar {
  display: flex; align-items: center; gap: 1rem;
  padding: 1.25rem 2rem;
  border-bottom: 1px solid var(--line);
  flex-shrink: 0;
}
.topbar-left { flex: 1; }
.topbar-title { font-size: 1.3rem; font-weight: 800; color: var(--white); letter-spacing: -0.3px; }
.topbar-sub   { font-size: 0.75rem; color: var(--muted); margin-top: 1px; font-family: 'DM Mono', monospace; }

.search-wrap {
  display: flex; align-items: center; gap: 0.5rem;
  background: var(--bg3); border: 1px solid var(--line);
  border-radius: 8px; padding: 0.5rem 0.875rem;
  transition: border-color 0.2s;
}
.search-wrap:focus-within { border-color: rgba(255,255,255,0.2); }
.search-wrap svg { width: 14px; height: 14px; color: var(--muted); flex-shrink:0; }
.search-wrap input {
  background: none; border: none; outline: none;
  font-family: 'DM Mono', monospace; font-size: 0.8rem;
  color: var(--text); width: 180px;
}
.search-wrap input::placeholder { color: var(--muted2); }

/* VIEW PANELS */
.panels { flex: 1; overflow: hidden; position: relative; }
.view-panel { position: absolute; inset: 0; overflow-y: auto; display: none; }
.view-panel.active { display: block; }

/* TABLE HEADER */
.table-header {
  display: grid;
  grid-template-columns: 36px 44px 1fr 200px 60px 80px 52px;
  gap: 0; padding: 0.5rem 1.5rem;
  position: sticky; top: 0; z-index: 5;
  background: var(--bg2);
  border-bottom: 1px solid var(--line);
}
.th {
  font-size: 0.65rem; font-weight: 700; text-transform: uppercase;
  letter-spacing: 1.5px; color: var(--muted2);
  font-family: 'DM Mono', monospace;
  padding: 0.4rem 0;
}
.th.right { text-align: right; }

/* SONG ROW */
.song-row {
  display: grid;
  grid-template-columns: 36px 44px 1fr 200px 60px 80px 52px;
  gap: 0; padding: 0.3rem 1.5rem;
  align-items: center;
  border-radius: 0;
  cursor: pointer;
  transition: background 0.1s;
  animation: rowIn 0.4s var(--ease-out) both;
}
.song-row:hover { background: var(--bg3); }
.song-row.now-playing { background: rgba(255,255,255,0.04); }
.song-row.now-playing .row-title { color: var(--white); }

@keyframes rowIn {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}

.row-num {
  font-family: 'DM Mono', monospace; font-size: 0.75rem;
  color: var(--muted); display: flex; align-items: center;
}
.playing-dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--track-accent);
  box-shadow: 0 0 8px var(--track-accent);
  animation: pulse 1.4s ease-in-out infinite;
}
@keyframes pulse {
  0%,100% { opacity: 1; transform: scale(1); }
  50%      { opacity: 0.5; transform: scale(0.75); }
}

.row-disc {
  width: 36px; height: 36px; border-radius: 4px;
  background: var(--bg4);
  display: flex; align-items: center; justify-content: center;
  position: relative; overflow: hidden;
  box-shadow: 0 0 0 1px rgba(255,255,255,0.05);
}
.row-disc::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, var(--disc-accent, #333) 0%, transparent 100%);
  opacity: 0.5;
}
.row-play {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  background: rgba(0,0,0,0.6); border: none; cursor: pointer;
  color: var(--white); opacity: 0; transition: opacity 0.15s;
}
.row-play svg { width: 14px; height: 14px; }
.song-row:hover .row-play { opacity: 1; }

.row-meta { padding: 0 0.75rem; min-width: 0; }
.row-title  { font-size: 0.875rem; font-weight: 600; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.row-artist { font-size: 0.75rem; color: var(--muted); margin-top: 1px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.row-album { font-size: 0.78rem; color: var(--muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding-right: 1rem; }
.row-year  { font-family: 'DM Mono', monospace; font-size: 0.72rem; color: var(--muted2); }

.row-actions {
  display: flex; align-items: center; gap: 0.25rem;
  opacity: 0; transition: opacity 0.1s;
}
.song-row:hover .row-actions { opacity: 1; }
.song-row.now-playing .row-actions { opacity: 1; }

.row-like, .row-add {
  width: 28px; height: 28px; border-radius: 50%;
  border: none; background: none; cursor: pointer;
  font-size: 0.9rem; color: var(--muted);
  display: flex; align-items: center; justify-content: center;
  transition: all 0.15s;
}
.row-like:hover { color: #ff4f7b; }
.row-like.liked  { color: #ff4f7b; }
.row-add:hover  { color: var(--white); background: var(--bg4); }
.row-add.in-queue { color: var(--muted); }

.row-dur {
  font-family: 'DM Mono', monospace; font-size: 0.72rem;
  color: var(--muted); text-align: right;
}

/* QUEUE VIEW */
.queue-header {
  display: flex; align-items: center; gap: 0.75rem;
  padding: 1.25rem 2rem; border-bottom: 1px solid var(--line);
  position: sticky; top: 0; z-index: 5; background: var(--bg2);
}
.queue-title { font-size: 1rem; font-weight: 700; color: var(--white); flex: 1; }

.queue-item {
  display: grid;
  grid-template-columns: 28px 1fr auto 28px;
  gap: 0.75rem; align-items: center;
  padding: 0.625rem 2rem;
  cursor: pointer; transition: background 0.1s;
}
.queue-item:hover { background: var(--bg3); }
.queue-item.playing { background: rgba(255,255,255,0.04); }
.queue-num { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--muted); text-align:center; }
.q-wave    { color: var(--track-accent); animation: pulse 1.2s ease-in-out infinite; }
.qi-title  { font-size: 0.875rem; font-weight: 600; color: var(--text); }
.qi-artist { font-size: 0.75rem; color: var(--muted); }
.qi-dur    { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--muted); }
.qi-remove { background:none; border:none; color:var(--muted2); cursor:pointer; font-size:0.8rem; transition:color 0.1s; padding:4px; }
.qi-remove:hover { color: var(--danger, #ff4f7b); }

/* SEARCH VIEW */
.search-label { padding: 1rem 2rem 0.5rem; font-size:0.78rem; color:var(--muted); font-family:'DM Mono',monospace; }
.search-label em { color: var(--text); font-style:normal; }

/* EMPTY STATE */
.empty-state {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; gap: 0.5rem;
  padding: 5rem 2rem; color: var(--muted);
}
.empty-state span { font-size: 2rem; }
.empty-state p    { font-size: 0.9rem; font-weight: 600; }
.empty-state small{ font-size: 0.78rem; color: var(--muted2); }

/* ═══════════════════════════════════════════
   PLAYER BAR
   ═══════════════════════════════════════════ */
.player-bar {
  grid-column: 1 / -1; grid-row: 2;
  height: var(--player-h);
  background: rgba(10,10,10,0.98);
  backdrop-filter: blur(20px);
  border-top: 1px solid var(--line);
  display: flex;
  flex-direction: row;
  align-items: center;
  position: relative; z-index: 50;
  padding: 0 1.5rem;
  gap: 1rem;
}
.np-section       { flex: 0 0 var(--sidebar-w); min-width: 0; }
.controls-section { flex: 1; min-width: 0; }
.right-section    { flex: 0 0 280px; }

/* Now playing info */
.np-section {
  display: flex; align-items: center; gap: 0.875rem;
  min-width: 0;
}
.disc-wrap {
  position: relative; flex-shrink: 0;
}
#discArt {
  width: 48px; height: 48px; border-radius: 8px;
  background: var(--bg4);
  display: flex; align-items: center; justify-content: center;
  overflow: hidden; position: relative;
  box-shadow: 0 0 0 1px rgba(255,255,255,0.06), 0 4px 20px rgba(0,0,0,0.5);
}
#discArt::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg, var(--track-accent) 0%, transparent 60%);
  opacity: 0.3; transition: background 0.5s;
}
#discArt .disc-label {
  width: 14px; height: 14px; border-radius: 50%;
  background: var(--bg); position: relative; z-index:1;
  border: 2px solid rgba(255,255,255,0.12);
}
#discArt.spinning { animation: spinDisc 4s linear infinite; }
@keyframes spinDisc { to { transform: rotate(360deg); } }

.heart-burst {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  color: #ff4f7b; font-size: 1.2rem; z-index: 10;
  animation: heartPop 0.8s var(--ease) forwards;
  pointer-events: none;
}
@keyframes heartPop {
  0%   { opacity:1; transform:scale(0.5); }
  50%  { opacity:1; transform:scale(1.4); }
  100% { opacity:0; transform:scale(1) translateY(-20px); }
}

.np-info { min-width: 0; }
#npTitle  { font-size: 0.875rem; font-weight: 700; color: var(--white); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
#npArtist { font-size: 0.75rem; color: var(--muted); margin-top: 1px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

#likeBtn {
  width: 30px; height: 30px; border-radius: 50%;
  border: none; background: none; cursor: pointer;
  font-size: 1rem; color: var(--muted2);
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; transition: all 0.15s;
}
#likeBtn:hover { color: #ff4f7b; }
#likeBtn.liked  { color: #ff4f7b; }

/* Center controls */
.controls-section {
  display: flex; flex-direction: column; align-items: center; gap: 0.5rem;
}
.ctl-row {
  display: flex; align-items: center; gap: 0.25rem;
}
.ctl-btn {
  width: 32px; height: 32px; border-radius: 50%;
  border: none; background: none; cursor: pointer;
  color: var(--muted); display: flex; align-items: center; justify-content: center;
  transition: all 0.15s;
}
.ctl-btn svg { width: 15px; height: 15px; }
.ctl-btn:hover { color: var(--white); }
.ctl-btn.active { color: var(--white); }
.ctl-btn.active svg { filter: drop-shadow(0 0 4px var(--track-accent)); }

#playBtn {
  width: 38px; height: 38px; border-radius: 50%;
  background: var(--white); color: var(--bg); border: none;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: transform 0.15s, box-shadow 0.15s;
  box-shadow: 0 2px 12px rgba(255,255,255,0.15);
}
#playBtn:hover { transform: scale(1.05); box-shadow: 0 4px 20px rgba(255,255,255,0.25); }
#playIcon { display:flex; align-items:center; justify-content:center; }
#playIcon svg { width: 16px; height: 16px; }

.seek-row {
  display: flex; align-items: center; gap: 0.625rem; width: 100%; max-width: 400px;
}
.time-label { font-family:'DM Mono',monospace; font-size:0.65rem; color:var(--muted); white-space:nowrap; }

#seekBar {
  flex: 1; height: 3px;
  background: var(--bg4); border-radius: 99px;
  position: relative; cursor: pointer;
  transition: height 0.15s;
}
#seekBar:hover { height: 5px; }
#seekFill {
  position: absolute; left:0; top:0; bottom:0;
  background: var(--white); border-radius: 99px;
  width: 0%; transition: width 0.1s linear;
  pointer-events: none;
}
#seekDot {
  position: absolute; top:50%; transform:translate(-50%,-50%);
  width: 10px; height: 10px; border-radius: 50%;
  background: var(--white); left: 0%;
  opacity: 0; transition: opacity 0.15s;
  pointer-events: none;
}
#seekBar:hover #seekDot { opacity: 1; }

/* Right controls */
.right-section {
  display: flex; align-items: center; gap: 0.5rem; justify-content: flex-end;
}
.vol-wrap {
  display: flex; align-items: center; gap: 0.4rem;
}
#volIcon {
  width: 28px; height: 28px; border-radius: 50%;
  border: none; background: none; cursor: pointer;
  color: var(--muted); display: flex; align-items: center; justify-content: center;
  transition: color 0.15s;
}
#volIcon:hover { color: var(--text); }
#volIcon svg { width: 16px; height: 16px; }

#volSlider {
  -webkit-appearance: none; appearance: none;
  width: 80px; height: 3px;
  background: var(--bg4); border-radius: 99px; outline: none;
  cursor: pointer;
}
#volSlider::-webkit-slider-thumb {
  -webkit-appearance: none; appearance: none;
  width: 10px; height: 10px; border-radius: 50%;
  background: var(--white); cursor: pointer;
}
#volSlider::-moz-range-thumb {
  width: 10px; height: 10px; border-radius: 50%;
  background: var(--white); border: none; cursor: pointer;
}

/* ═══════════════════════════════════════════
   TOASTS
   ═══════════════════════════════════════════ */
#toastContainer {
  position: fixed; bottom: calc(var(--player-h) + 1rem); right: 1.5rem;
  display: flex; flex-direction: column; gap: 0.4rem; z-index: 9999;
  pointer-events: none;
}
.toast {
  background: var(--bg4);
  color: var(--text);
  padding: 0.6rem 1rem; border-radius: 8px;
  font-size: 0.8rem; font-weight: 600;
  border: 1px solid var(--line);
  animation: toastIn 0.25s var(--ease-out);
  transition: opacity 0.25s, transform 0.25s;
}
.toast.hide { opacity: 0; transform: translateX(12px); }
.toast.toast-success { border-color: rgba(57,255,20,0.25); }
.toast.toast-error   { border-color: rgba(255,79,123,0.25); }
@keyframes toastIn { from { opacity:0; transform:translateX(12px); } to { opacity:1; transform:none; } }

/* ═══════════════════════════════════════════
   HIDE ON MOBILE
   ═══════════════════════════════════════════ */
/* ═══════════════════════════════════════════
   TABLET  ≤ 900px
   ═══════════════════════════════════════════ */
@media (max-width: 900px) {
  .hide-mobile { display: none !important; }

  /* Kill sidebar — main takes full width */
  .app {
    grid-template-columns: 1fr;
    grid-template-rows: 1fr var(--player-h);
  }
  .sidebar { display: none; }

  /* Main fills the whole column */
  .main { grid-column: 1; }

  /* Topbar tighter */
  .topbar { padding: 1rem 1rem; }
  .topbar-title { font-size: 1.1rem; }

  /* Table — hide album & year cols */
  .table-header {
    grid-template-columns: 28px 40px 1fr 68px 40px;
    padding: 0 1rem;
  }
  .song-row {
    grid-template-columns: 28px 40px 1fr 68px 40px;
    padding: 0.3rem 1rem;
  }
  .row-actions { opacity: 1; }

  /* Player bar — stack vertically */
  .player-bar {
    flex-direction: column;
    align-items: stretch;
    height: auto;
    padding: 0.75rem 1rem 0.625rem;
    gap: 0.4rem;
  }
  .np-section {
    flex: none; width: 100%;
    justify-content: flex-start;
  }
  .controls-section {
    flex: none; width: 100%;
    order: -1; /* controls on top */
  }
  .right-section {
    display: flex;
    flex: none; width: 100%;
    justify-content: center;
  }
  .vol-wrap { width: 100%; gap: 0.5rem; }
  #volSlider { flex: 1; }

  /* Player height adjusts */
  :root { --player-h: 160px; }
}

/* ═══════════════════════════════════════════
   MOBILE  ≤ 600px
   ═══════════════════════════════════════════ */
@media (max-width: 600px) {

  /* Table — just num + disc + title + duration */
  .table-header {
    grid-template-columns: 28px 36px 1fr 44px;
    padding: 0 0.75rem;
  }
  .song-row {
    grid-template-columns: 28px 36px 1fr 44px;
    padding: 0.25rem 0.75rem;
  }
  /* Hide actions col on small phones — row-like/add hidden */
  .row-actions { display: none; }
  .row-dur { font-size: 0.68rem; }

  /* Topbar — shrink search */
  .topbar { padding: 0.875rem 0.75rem; gap: 0.5rem; }
  .search-wrap input { width: 110px; font-size: 0.75rem; }
  .topbar-title { font-size: 1rem; }

  /* Queue */
  .queue-header { padding: 1rem 0.75rem; }
  .queue-item   { padding: 0.5rem 0.75rem; }

  /* Player bar */
  :root { --player-h: 155px; }
  .player-bar { padding: 0.625rem 0.75rem 0.5rem; }

  /* Seek row tighter */
  .seek-row { max-width: 100%; }
  .time-label { font-size: 0.6rem; }

  /* Disc smaller */
  #discArt { width: 40px; height: 40px; }
  #npTitle  { font-size: 0.8rem; }
  #npArtist { font-size: 0.7rem; }

  /* Control buttons tighter */
  .ctl-btn { width: 28px; height: 28px; }
  .ctl-btn svg { width: 13px; height: 13px; }
  #playBtn { width: 34px; height: 34px; }
  #playIcon svg { width: 14px; height: 14px; }
}

/* ── DISC LOADING STATE ── */
#discArt.loading::after {
  content: '';
  position: absolute; inset: 0;
  border-radius: 8px;
  background: var(--bg4);
  display: flex; align-items: center; justify-content: center;
  z-index: 2;
}
#discArt.loading::before {
  content: '';
  position: absolute;
  width: 18px; height: 18px;
  border: 2px solid rgba(255,255,255,0.15);
  border-top-color: var(--white);
  border-radius: 50%;
  z-index: 3;
  animation: spin 0.7s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
